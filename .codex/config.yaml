# Codex Configuration for SmartPen Project
# æœ¬åœ°ä»£ç å®¡æŸ¥æ¨¡å‹é…ç½®

review:
  # å¿«é€Ÿæ¨¡å¼ (Pre-commit)
  quick:
    timeout: 30
    severity: ["error", "warning"]
    include:
      - syntax
      - style
      - imports
      - basic_security
    exclude:
      - complexity
      - architecture
      - performance

  # æ·±åº¦æ¨¡å¼ (PR å®¡æŸ¥)
  deep:
    timeout: 300
    severity: ["error", "warning", "info"]
    include:
      - syntax
      - style
      - security
      - architecture
      - complexity
      - testing
      - performance
      - documentation

# è¯­è¨€ç‰¹å®šè®¾ç½®
languages:
  python:
    formatter: black
    linter: ruff
    type_checker: mypy
    max_line_length: 100

  dart:
    formatter: dart format
    linter: flutter analyze
    max_line_length: 100

# é¡¹ç›®ç‰¹å®šé…ç½®
project:
  name: "SmartPen"
  description: "AI Calligraphy Teaching System - æ™ºç¬” AI ç¡¬ç¬”ä¹¦æ³•æ•™å­¦ç³»ç»Ÿ"

  # å…³é”®æŠ€æœ¯çº¦æŸ (æ¥è‡ª PRD v2.2)
  constraints:
    - "TensorFlow 2.15.0 (InkSight æ¨¡å‹ï¼Œä½¿ç”¨ tf.keras)"
    - "google_ml_kit_pose_detection (ä¸ä½¿ç”¨åŸç”Ÿ MediaPipe)"
    - "dtw-python åº“ (ä¸è‡ªå®šä¹‰å®ç° DTW)"
    - "Hanzi Writer CDN åŠ è½½ (ä¸æœ¬åœ°å­˜å‚¨)"

  # è™šæ‹Ÿç¯å¢ƒç®¡ç†è§„èŒƒ (Monorepo åŸåˆ™)
  # âš ï¸ CRITICAL: è¿åè¿™äº›è§„åˆ™ä¼šå¯¼è‡´ä¾èµ–å†²çªå’Œ InkSight æ¨¡å‹åŠ è½½å¤±è´¥
  environment_management:
    python:
      # åç«¯ç¯å¢ƒ
      backend:
        location: "backend/venv"
        purpose: "å”¯ä¸€çš„ Python è™šæ‹Ÿç¯å¢ƒ"
        contains:
          - "FastAPI + Web æ¡†æ¶"
          - "TensorFlow 2.15.0 + tf.keras (Keras 2.15)"
          - "PaddleOCR (OCR åŠŸèƒ½)"
          - "DTW ç®—æ³• (è¯„åˆ†åŠŸèƒ½)"
          - "pytest (æµ‹è¯•)"
        critical_rules:
          - "ğŸš« ä¸¥ç¦åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º venv/"
          - "ğŸš« ä¸¥ç¦åœ¨ frontend/ ç›®å½•åˆ›å»º venv/"
          - "ğŸš« ä¸¥ç¦å®‰è£…ç‹¬ç«‹çš„ keras åŒ… (ä½¿ç”¨ tf.keras)"
          - "âš ï¸ TensorFlow å¿…é¡»é”å®šä¸º 2.15.0 (Keras 3 ä¸å…¼å®¹)"
          - "âš ï¸ NumPy å¿…é¡» < 2.0.0"

      # å‰ç«¯ç¯å¢ƒ
      frontend:
        python_venv: false
        reason: "Flutter ä¾èµ–ç”± pubspec.yaml ç®¡ç†ï¼Œä¸éœ€è¦ Python venv"

      # å·¥å…·ç¯å¢ƒéš”ç¦»
      tools:
        notebooklm_skill:
          location: "~/.claude/skills/notebooklm/.venv"
          purpose: "NotebookLM Skill ä¸“ç”¨ç¯å¢ƒ"
          isolation: "å®Œå…¨ç‹¬ç«‹ï¼Œä¸å½±å“é¡¹ç›®ç¯å¢ƒ"
        warning: "æ ¹ç›®å½• venv ä¼šä¸å·¥å…·ç¯å¢ƒæ··æ·†ï¼Œå¿…é¡»åˆ é™¤"

  # æŠ€æœ¯æ ˆ
  tech_stack:
    frontend: "Flutter 3.16+"
    backend: "FastAPI 0.104+"
    database: "PostgreSQL 15+"
    cache: "Redis 7+"

  # è´¨é‡é—¨æ§›
  quality_gates:
    coverage_threshold: 85
    max_function_length: 50
    max_cyclomatic_complexity: 10

# è¾“å‡ºæ ¼å¼é…ç½®
output:
  format: markdown
  include_code_snippets: true
  show_line_numbers: true
